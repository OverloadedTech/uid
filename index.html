<!DOCTYPE html>
<html>
  <head>
    <title>UID Generator</title>
  </head>
  <body>
    <h1>UID Generator</h1>
    <form>
      <label for="num-uids">Number of UIDs to generate:</label>
      <input type="number" id="num-uids" name="num-uids" min="1" max="1000" value="10">
      <button type="button" onclick="generateUIDs()">Generate</button>
    </form>
    <div id="logs"></div>
    <a id="download-link" style="display: none">Download UIDs</a>
    <script>
      function generateUIDs() {
        // Get the number of UIDs to generate from the input field
        const numUIDs = parseInt(document.getElementById("num-uids").value);
        // Initialize an array to store the generated UIDs
        const uids = [];
        // Generate the specified number of UIDs
        for (let i = 0; i < numUIDs; i++) {
          uids.push(
            generateUID()
          );
        }
        // Log the generated UIDs
        log(uids.join("\n"));
        // Convert the UIDs to a Blob object and create a download link
        const blob = new Blob([uids.join("\n")], { type: "text/plain" });
        const downloadLink = document.getElementById("download-link");
        downloadLink.href = URL.createObjectURL(blob);
        downloadLink.download = "uids.txt";
        // Show the download link
        downloadLink.style.display = "block";
      }
      
      function generateUID() {
        // Initialize an array of hexadecimal digits
        const hexDigits = "0123456789abcdef".split("");
        // Generate a random 32-bit integer
        let num = new Uint32Array(1);
        window.crypto.getRandomValues(num);
        // Convert the integer to a string of hexadecimal digits
        const hexArray = [];
        for (let i = 0; i < 8; i++) {
          hexArray.push(hexDigits[(num[0] >> (4 * i)) & 0xf]);
        }
        // Insert hyphens at the appropriate positions to create a UUIDv4 string
        hexArray.splice(4, 0, "-");
        hexArray.splice(7, 0, "-");
        hexArray.splice(12, 0, "-");
        hexArray.splice(17, 0, "-");
        return hexArray.join("");
      }
      
      function log(message) {
        // Get the logs element
        const logs = document.getElementById("logs");
        // Create a new log entry
        const logEntry = document.createElement("p");
        logEntry.textContent = message;
        // Add the log entry to the logs element
        logs.appendChild(logEntry);
      }
    </script>
  </body>
</html>
